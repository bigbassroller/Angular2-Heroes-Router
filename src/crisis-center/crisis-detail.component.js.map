{"version":3,"sources":["src/crisis-center/crisis-detail.component.ts"],"names":["CrisisDetailComponent","CrisisDetailComponent.constructor","CrisisDetailComponent.ngOnInit","CrisisDetailComponent.routerCanDeactivate","CrisisDetailComponent.cancel","CrisisDetailComponent.save","CrisisDetailComponent.gotoCrises"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;YAOA;gBA0BEA,+BACUA,QAAuBA,EACvBA,OAAeA,EACfA,YAAyBA,EACzBA,OAAsBA;oBAHtBC,aAAQA,GAARA,QAAQA,CAAeA;oBACvBA,YAAOA,GAAPA,OAAOA,CAAQA;oBACfA,iBAAYA,GAAZA,YAAYA,CAAaA;oBACzBA,YAAOA,GAAPA,OAAOA,CAAeA;gBAC1BA,CAACA;gBAEPD,wCAAQA,GAARA;oBAAAE,iBAUCA;oBATCA,IAAIA,EAAEA,GAAGA,CAACA,IAAIA,CAACA,YAAYA,CAACA,GAAGA,CAACA,IAAIA,CAACA,CAACA;oBACtCA,IAAIA,CAACA,QAAQA,CAACA,SAASA,CAACA,EAAEA,CAACA,CAACA,IAAIA,CAACA,UAAAA,MAAMA;wBACrCA,EAAEA,CAACA,CAACA,MAAMA,CAACA,CAACA,CAACA;4BACXA,KAAIA,CAACA,QAAQA,GAAGA,MAAMA,CAACA,IAAIA,CAACA;4BAC5BA,KAAIA,CAACA,MAAMA,GAAGA,MAAMA,CAACA;wBACvBA,CAACA;wBAACA,IAAIA,CAACA,CAACA;4BACNA,KAAIA,CAACA,UAAUA,EAAEA,CAACA;wBACpBA,CAACA;oBACHA,CAACA,CAACA,CAACA;gBACLA,CAACA;gBAEDF,mDAAmBA,GAAnBA,UAAoBA,IAA0BA,EAAEA,IAA0BA;oBACxEG,iFAAiFA;oBACjFA,EAAEA,CAACA,CAACA,CAACA,IAAIA,CAACA,MAAMA,IAAIA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,KAAKA,IAAIA,CAACA,QAAQA,CAACA,CAACA,CAACA;wBACvDA,MAAMA,CAACA,IAAIA,CAACA;oBACdA,CAACA;oBACDA,gEAAgEA;oBAChEA,gEAAgEA;oBAChEA,MAAMA,CAACA,IAAIA,CAACA,OAAOA,CAACA,OAAOA,CAACA,kBAAkBA,CAACA,CAACA;gBAClDA,CAACA;gBAEDH,sCAAMA,GAANA;oBACEI,IAAIA,CAACA,QAAQA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,IAAIA,CAACA;oBACjCA,IAAIA,CAACA,UAAUA,EAAEA,CAACA;gBACpBA,CAACA;gBAEDJ,oCAAIA,GAAJA;oBACEK,IAAIA,CAACA,MAAMA,CAACA,IAAIA,GAAGA,IAAIA,CAACA,QAAQA,CAACA;oBACjCA,IAAIA,CAACA,UAAUA,EAAEA,CAACA;gBACpBA,CAACA;gBAEDL,0CAAUA,GAAVA;oBACEM,IAAIA,QAAQA,GAAGA,IAAIA,CAACA,MAAMA,GAAGA,IAAIA,CAACA,MAAMA,CAACA,EAAEA,GAAGA,IAAIA,CAACA;oBACnDA,sCAAsCA;oBACtCA,wDAAwDA;oBACxDA,mDAAmDA;oBACnDA,IAAIA,CAACA,OAAOA,CAACA,QAAQA,CAACA,CAACA,cAAcA,EAAGA,EAACA,EAAEA,EAAEA,QAAQA,EAACA,CAAEA,CAACA,CAACA;gBAC5DA,CAACA;gBAvEHN;oBAACA,gBAASA,CAACA;wBACTA,QAAQA,EAAEA,yBAAyBA;wBACnCA,QAAQA,EAAEA,kcAeTA;wBACDA,MAAMA,EAAEA,CAACA,qBAAqBA,CAACA;qBAChCA,CAACA;;0CAqDDA;gBAADA,4BAACA;YAADA,CAxEA,AAwECA,IAAA;YAxED,yDAwEC,CAAA;;;;AAGD;;;;EAIE","file":"src/crisis-center/crisis-detail.component.js","sourcesContent":["\nimport {Component, OnInit} from 'angular2/core';\nimport {Crisis, CrisisService} from './crisis.service';\nimport {RouteParams, Router} from 'angular2/router';\nimport {CanDeactivate, ComponentInstruction} from 'angular2/router';\nimport {DialogService} from '../dialog.service';\n\n@Component({\n  selector: 'crisis-detail-component',\n  template: `\n  <div class=\"alert alert-info\" role=\"alert\">\n    <strong>crisis-detail.component.ts</strong>\n  </div>\n  <div *ngIf=\"crisis\">\n    <h3>\"{{editName}}\"</h3>\n    <div>\n      <label>Id: </label>{{crisis.id}}</div>\n    <div>\n      <label>Name: </label>\n      <input [(ngModel)]=\"editName\" placeholder=\"name\"/>\n    </div>\n    <button (click)=\"save()\">Save</button>\n    <button (click)=\"cancel()\">Cancel</button>\n  </div>\n  `,\n  styles: ['input {width: 20em}']\n})\n\nexport class CrisisDetailComponent implements OnInit, CanDeactivate {\n\n  crisis: Crisis;\n  editName: string;\n\n  constructor(\n    private _service: CrisisService,\n    private _router: Router,\n    private _routeParams: RouteParams,\n    private _dialog: DialogService\n    ) { }\n\n  ngOnInit() {\n    let id = +this._routeParams.get('id');\n    this._service.getCrisis(id).then(crisis => {\n      if (crisis) {\n        this.editName = crisis.name;\n        this.crisis = crisis;\n      } else { // id not found\n        this.gotoCrises();\n      }\n    });\n  }\n\n  routerCanDeactivate(next: ComponentInstruction, prev: ComponentInstruction) : any {\n    // Allow synchronous navigation (`true`) if no crisis or the crisis is unchanged.\n    if (!this.crisis || this.crisis.name === this.editName) {\n      return true;\n    }\n    // Otherwise ask the user with the dialog service and return its\n    // promise which resolves to true or false when the user decides\n    return this._dialog.confirm('Discard changes?');\n  }\n\n  cancel() {\n    this.editName = this.crisis.name;\n    this.gotoCrises();\n  }\n\n  save() {\n    this.crisis.name = this.editName;\n    this.gotoCrises();\n  }\n\n  gotoCrises() {\n    let crisisId = this.crisis ? this.crisis.id : null;\n    // Pass along the hero id if available\n    // so that the CrisisListComponent can select that hero.\n    // Add a totally useless `foo` parameter for kicks.\n    this._router.navigate(['CrisisCenter',  {id: crisisId} ]);\n  }\n}\n\n\n/*\nCopyright 2016 Google Inc. All Rights Reserved.\nUse of this source code is governed by an MIT-style license that\ncan be found in the LICENSE file at http://angular.io/license\n*/"],"sourceRoot":"/source/"}